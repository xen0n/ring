language: rust
cache:
  directories:
    - $HOME/kcov-i686-unknown-linux-gnu
    - $HOME/kcov-x86_64-unknown-linux-gnu
matrix:
  fast_finish: true
  allow_failures:
    - rust: nightly
  include:
    # The lines from "# BEGIN GENERATED" through "# END GENERATED" are
    # generated by running |python mk/update-travis-yml.py|. Any changes
    # made to those lines will be overwritten while other lines will be left
    # untouched.
    #
    # BEGIN GENERATED
    - env: TARGET_X=mips64-unknown-linux-gnuabi64 CC_X=mips64-linux-gnuabi64-gcc FEATURES_X= MODE_X=DEBUG KCOV=0 RUST_X=stable
      rust: stable
      os: linux
      dist: bionic
      addons:
        apt:
          packages:
            - gcc-mips64-linux-gnuabi64
            - libc6-dev-mips64-cross
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET_X=mips64-unknown-linux-gnuabi64 CC_X=mips64-linux-gnuabi64-gcc FEATURES_X= MODE_X=RELWITHDEBINFO KCOV=0 RUST_X=stable
      rust: stable
      os: linux
      dist: bionic
      addons:
        apt:
          packages:
            - gcc-mips64-linux-gnuabi64
            - libc6-dev-mips64-cross
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET_X=mips64el-unknown-linux-gnuabi64 CC_X=mips64el-linux-gnuabi64-gcc FEATURES_X= MODE_X=DEBUG KCOV=0 RUST_X=stable
      rust: stable
      os: linux
      dist: bionic
      addons:
        apt:
          packages:
            - gcc-mips64el-linux-gnuabi64
            - libc6-dev-mips64el-cross
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET_X=mips64el-unknown-linux-gnuabi64 CC_X=mips64el-linux-gnuabi64-gcc FEATURES_X= MODE_X=RELWITHDEBINFO KCOV=0 RUST_X=stable
      rust: stable
      os: linux
      dist: bionic
      addons:
        apt:
          packages:
            - gcc-mips64el-linux-gnuabi64
            - libc6-dev-mips64el-cross
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET_X=mips64-unknown-linux-gnuabi64 CC_X=mips64-linux-gnuabi64-gcc FEATURES_X= MODE_X=DEBUG KCOV=0 RUST_X=nightly
      rust: nightly
      os: linux
      dist: bionic
      addons:
        apt:
          packages:
            - gcc-mips64-linux-gnuabi64
            - libc6-dev-mips64-cross
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET_X=mips64-unknown-linux-gnuabi64 CC_X=mips64-linux-gnuabi64-gcc FEATURES_X= MODE_X=RELWITHDEBINFO KCOV=0 RUST_X=nightly
      rust: nightly
      os: linux
      dist: bionic
      addons:
        apt:
          packages:
            - gcc-mips64-linux-gnuabi64
            - libc6-dev-mips64-cross
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET_X=mips64el-unknown-linux-gnuabi64 CC_X=mips64el-linux-gnuabi64-gcc FEATURES_X= MODE_X=DEBUG KCOV=0 RUST_X=nightly
      rust: nightly
      os: linux
      dist: bionic
      addons:
        apt:
          packages:
            - gcc-mips64el-linux-gnuabi64
            - libc6-dev-mips64el-cross
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET_X=mips64el-unknown-linux-gnuabi64 CC_X=mips64el-linux-gnuabi64-gcc FEATURES_X= MODE_X=RELWITHDEBINFO KCOV=0 RUST_X=nightly
      rust: nightly
      os: linux
      dist: bionic
      addons:
        apt:
          packages:
            - gcc-mips64el-linux-gnuabi64
            - libc6-dev-mips64el-cross
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET_X=mips64-unknown-linux-gnuabi64 CC_X=mips64-linux-gnuabi64-gcc FEATURES_X= MODE_X=DEBUG KCOV=0 RUST_X=beta
      rust: beta
      os: linux
      dist: bionic
      addons:
        apt:
          packages:
            - gcc-mips64-linux-gnuabi64
            - libc6-dev-mips64-cross
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET_X=mips64-unknown-linux-gnuabi64 CC_X=mips64-linux-gnuabi64-gcc FEATURES_X= MODE_X=RELWITHDEBINFO KCOV=0 RUST_X=beta
      rust: beta
      os: linux
      dist: bionic
      addons:
        apt:
          packages:
            - gcc-mips64-linux-gnuabi64
            - libc6-dev-mips64-cross
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET_X=mips64el-unknown-linux-gnuabi64 CC_X=mips64el-linux-gnuabi64-gcc FEATURES_X= MODE_X=DEBUG KCOV=0 RUST_X=beta
      rust: beta
      os: linux
      dist: bionic
      addons:
        apt:
          packages:
            - gcc-mips64el-linux-gnuabi64
            - libc6-dev-mips64el-cross
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET_X=mips64el-unknown-linux-gnuabi64 CC_X=mips64el-linux-gnuabi64-gcc FEATURES_X= MODE_X=RELWITHDEBINFO KCOV=0 RUST_X=beta
      rust: beta
      os: linux
      dist: bionic
      addons:
        apt:
          packages:
            - gcc-mips64el-linux-gnuabi64
            - libc6-dev-mips64el-cross
          sources:
            - ubuntu-toolchain-r-test

    # END GENERATED

script: if [[ "$TARGET_X" =~ '^mips' || ( "$TARGET_X" =~ '^a.*linux-' && "$MODE_X" == "RELWITHDEBINFO" ) ]]; then travis_wait 60 mk/travis.sh; else mk/travis.sh; fi
